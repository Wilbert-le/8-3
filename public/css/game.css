/* ============================================================
   Mystic Card Night – game.css
   ============================================================ */

:root {
  --bg:         #7a0d22;
  --gold:       #c9a84c;
  --gold-light: #e8cc7a;
  --gold-dark:  #a07830;
  --card-bg:    #f5f0dc;
  --card-border:#c9a84c;
  --shadow:     rgba(0, 0, 0, 0.6);
}

/* ---------- Reset ---------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
}

body {
  background-color: var(--bg);
  background-image:
    radial-gradient(ellipse at 50% 0%,   rgba(200,50,80,0.3)  0%, transparent 60%),
    radial-gradient(ellipse at 50% 100%, rgba(40,0,8,0.55)    0%, transparent 65%);
  font-family: 'Lora', Georgia, serif;
  color: #fff;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  user-select: none;
}

/* ---------- Top bar ---------- */
.top-bar {
  height: 3px;
  background: linear-gradient(to right, transparent, var(--gold), transparent);
  opacity: .7;
  margin: 0 40px;
  flex-shrink: 0;
}

/* ---------- Header ---------- */
.game-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 16px 40px 8px;
  flex-shrink: 0;
}

/* Badge */
.badge-wrap {
  width: 90px;
  animation: badgeSpin 30s linear infinite;
}
@keyframes badgeSpin { to { transform: rotate(360deg); } }

.badge { position: relative; width: 90px; height: 90px; }
.badge-ring { width: 100%; height: 100%; }
.badge-heart {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px; color: var(--gold);
  text-shadow: 0 0 10px rgba(201,168,76,0.7);
  animation: heartPulse 2s ease-in-out infinite;
}
@keyframes heartPulse {
  0%,100% { transform: translate(-50%,-50%) scale(1); }
  50%      { transform: translate(-50%,-50%) scale(1.12); }
}

/* Hearts right */
.hearts-right { display: flex; gap: 8px; align-items: flex-start; padding-top: 4px; }
.heart-icon {
  font-size: 1.4rem; color: var(--gold);
  text-shadow: 0 0 8px rgba(201,168,76,0.6);
  animation: heartPop 3s ease-in-out infinite;
}
.heart-icon:nth-child(2) { animation-delay: .4s; }
.heart-icon:nth-child(3) { animation-delay: .8s; }
@keyframes heartPop {
  0%,100% { transform: scale(1);   opacity: .85; }
  50%      { transform: scale(1.2); opacity: 1; }
}

/* ---------- Header line ---------- */
.header-line {
  height: 1.5px;
  margin: 0 40px;
  background: linear-gradient(to right, transparent, var(--gold-dark), transparent);
  opacity: .55;
  flex-shrink: 0;
}

/* ============================================================
   GAME TABLE
   Dùng position:relative để đặt các góc bài tự do
============================================================ */
.game-table {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* ============================================================
   CARD BASE STYLES
============================================================ */
.card {
  position: relative;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
  border: none;
  overflow: visible;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform .25s ease;
  padding: 0;
}

.card-img {
  width: 100%;
  height: 100%;
  object-fit: fill;
  display: block;
}

/* ── Góc bài: dùng position absolute ── */
.card-slot {
  position: absolute;
}

/* ── Top-left: lá 2 bích ── */
.top-left {
  top: 8%;
  left: 12%;
}

/* ── Top-right: lá Queen (nhân vật) ── */
.top-right {
  top: 5%;
  right: 6%;
}

/* ── Bottom-left: lá Queen lớn ── */
.bottom-left {
  bottom: 6%;
  left: 4%;
}

/* ── Bottom-right: lá 9 chuồn ── */
.bottom-right {
  bottom: 4%;
  right: 4%;
}

/* ── Kích thước lá góc nhỏ ── */
.card-tilted-left,
.card-tilted-right {
  width:  clamp(100px, 12vw, 160px);
  height: clamp(140px, 17vw, 225px);
}

/* ── Lá góc lớn ── */
.card-big {
  width:  clamp(120px, 14vw, 190px);
  height: clamp(168px, 20vw, 266px);
}

/* ── Nghiêng trái ── */
.card-tilted-left  { transform: rotate(-20deg); }
/* ── Nghiêng phải ── */
.card-tilted-right { transform: rotate(18deg);  }

/* Hover các lá góc */
.card-slot .card:hover {
  transform: rotate(0deg) scale(1.07);
  z-index: 10;
}

/* ---------- Hint text: "Lật lá bài lên" ---------- */
.hint-text {
  position: absolute;
  top: 22%;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Dancing Script', cursive;
  font-size: clamp(1.2rem, 2.2vw, 1.8rem);
  color: #f0d0c8;
  letter-spacing: 0.04em;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  animation: hintAppear 0.8s 0.6s ease-out forwards;
}

@keyframes hintAppear {
  from { opacity: 0; transform: translateX(-50%) translateY(-8px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.hint-text.hidden {
  animation: hintFade 0.4s ease-out forwards;
}

@keyframes hintFade {
  to { opacity: 0; transform: translateY(-10px); }
}

/* ============================================================
   CENTER CARDS – 3 lá giữa bàn
============================================================ */
.center-cards {
  display: flex;
  align-items: center;
  gap: clamp(12px, 2vw, 28px);
  z-index: 2;
}

.card-center {
  width:  clamp(110px, 13vw, 175px);
  height: clamp(154px, 18.2vw, 245px);
}

/* ── Lá úp ở giữa – BUTTON ── */
.card-face-down {
  cursor: pointer;
  border: none;
  outline: none;
  padding: 0;
  background: transparent;
  position: relative;
  box-shadow: none;
}

/* Hiệu ứng pulse viền vàng cho lá úp */
.card-face-down::after {
  content: '';
  position: absolute; inset: -4px;
  border-radius: 18px;
  border: 2px solid rgba(201,168,76,0.5);
  animation: pulseRing 2.2s ease-in-out infinite;
  pointer-events: none;
}
@keyframes pulseRing {
  0%,100% { opacity: .5;  transform: scale(1);    }
  50%      { opacity: 1;   transform: scale(1.04); }
}

/* Hover lá úp */
.card-face-down:hover {
  transform: translateY(-8px) scale(1.05);
}

/* Active (bấm) */
.card-face-down:active {
  transform: translateY(-2px) scale(0.98);
}

/* Hiệu ứng entrance cho các lá giữa khi trang load */
.card-center:nth-child(1) { animation: cardSlideIn .6s  .1s ease-out both; }
.card-center:nth-child(2) { animation: cardSlideIn .6s  .3s ease-out both; }
.card-center:nth-child(3) { animation: cardSlideIn .6s  .5s ease-out both; }

@keyframes cardSlideIn {
  from { opacity: 0; transform: translateY(40px) scale(.9); }
  to   { opacity: 1; transform: translateY(0)    scale(1);  }
}

/* Các lá góc entrance */
.top-left    { animation: cornerFadeIn .7s .1s ease-out both; }
.top-right   { animation: cornerFadeIn .7s .2s ease-out both; }
.bottom-left { animation: cornerFadeIn .7s .3s ease-out both; }
.bottom-right{ animation: cornerFadeIn .7s .4s ease-out both; }

@keyframes cornerFadeIn {
  from { opacity: 0; transform: scale(.85); }
  to   { opacity: 1; }
}

/* ── Override transform khi có tilted + cornerFadeIn ── */
.top-left .card-tilted-left,
.bottom-left .card-big.card-tilted-left {
  transform: rotate(-20deg);
}
.top-right .card-tilted-right,
.bottom-right .card-big.card-tilted-right {
  transform: rotate(18deg);
}

/* ── Hover vẫn giữ đúng khi hover card bên trong slot ── */
.card-slot:hover .card-tilted-left  { transform: rotate(-20deg) scale(1.07); }
.card-slot:hover .card-tilted-right { transform: rotate(18deg)  scale(1.07); }

/* ---------- Responsive tablet ---------- */
@media (max-width: 768px) {
  .game-header { padding: 10px 16px 6px; }
  .top-bar, .header-line { margin: 0 16px; }
  .badge-wrap { width: 70px; }
  .badge { width: 70px; height: 70px; }
  .badge-heart { font-size: 18px; }

  .top-left  { top: 18%;  left: 3%; }
  .top-right { top: 15%;  right: 3%; }
  .bottom-left  { bottom: 15%; left: 3%; }
  .bottom-right { bottom: 12%; right: 3%; }

  .card-tilted-left,
  .card-tilted-right { width: 110px; height: 154px; }
  .card-big { width: 120px; height: 168px; }
  .card-center { width: 100px; height: 140px; }
  .center-cards { gap: 10px; }
}

/* ---------- Responsive mobile ---------- */
@media (max-width: 480px) {
  .game-header { padding: 8px 12px 4px; }
  .top-bar, .header-line { margin: 0 12px; }
  .badge-wrap { width: 58px; }
  .badge { width: 58px; height: 58px; }
  .badge-heart { font-size: 15px; }
  .hearts-right { gap: 5px; }
  .heart-icon { font-size: 1rem; }

  /* Đẩy các lá góc vào gần trung tâm hơn */
  .top-left  { top: 20%;  left: 2%; }
  .top-right { top: 17%;  right: 2%; }
  .bottom-left  { bottom: 16%; left: 2%; }
  .bottom-right { bottom: 13%; right: 2%; }

  /* Phóng to lá góc cho dễ nhìn */
  .card-tilted-left,
  .card-tilted-right { width: 100px; height: 140px; }
  .card-big { width: 110px; height: 154px; }

  /* 3 lá trung tâm */
  .card-center { width: 85px; height: 119px; }
  .center-cards { gap: 8px; }

  /* Hint text */
  .hint-text { font-size: 1rem; top: 30%; }
}